# Suggestion 5.3: Add Integration Tests

**Status:** REJECTED

**Original Location:** tests/integration/

**Rationale:** While integration tests are valuable, they require significant setup and maintenance overhead. This adds too much complexity for a minimal tool. Users can test manually with the --test flag.

**Original Content:**

### 5.3 Add Integration Tests
**Location:** tests/integration/

**Issue:** No end-to-end testing.

**Recommendation:**
```bash
# tests/integration/test_basic_workflow.sh
#!/usr/bin/env bash
set -euo pipefail

TEST_DIR=$(mktemp -d)
trap "rm -rf $TEST_DIR" EXIT

cd "$TEST_DIR"

# Initialize a minimal task
cat > prompt.md << 'EOF'
# TASK
Create a file named "test.txt" with content "Hello, World!"

# RULES
- Minimal diff
- If done, print exactly: <promise>COMPLETE</promise>
EOF

# Copy ralph.sh to test directory
cp "$(dirname "${BASH_SOURCE[0]}")/../../ralph.sh" .

# Run ralph in test mode
LOG="$TEST_DIR/.ralph.log"
timeout 30 ./ralph.sh --test 1 prompt.md > "$LOG" 2>&1

# Verify completion
grep -q "<promise>COMPLETE</promise>" "$LOG" || { echo "Test failed: completion token not found"; exit 1; }

# Verify file created
[[ -f "test.txt" ]] || { echo "Test failed: output file not created"; exit 1; }

echo "âœ“ Integration test passed"
```

Add to Makefile:
```makefile
test-integration:
	bash tests/integration/test_basic_workflow.sh

test-all: test-unit test-integration
```

**Rationale:** Validates real-world behavior, catches integration issues.
